{"version":3,"sources":["../src/mynotesblock.js"],"names":["define","$","Y","str","CONFIG","NODES","DELETE_ICON","SELECTORS","MYNOTES_BASE","MYNOTES_OPENER","MYNOTES_LISTS","CSS","panel","initnotes","strdeletenote","M","util","get_string","mynotes","getMynotesValidatedUrl","baseurl","a","document","createElement","href","search","length","getWarnings","status","instanceid","html","maxallowedcharacters_warning","ta","val","cl","maxallowedcharacters","checkInputText","removeAttr","attr","toggle_textarea","e","focus","type","css","request","args","params","scope","currenttab","replace","prefix","i","cfg","sesskey","method","on","start","complete","id","o","p","alert","data","JSON","parse","responseText","error","callback","arguments","headers","build_querystring","form","io","api","saveMynotes","preventDefault","arg","contextid","content","action","contextarea","currenttabindex","image_url","ret","notes","backgroundImage","defaulttab","tab","removeClass","addClass","has","not","addToList","displayMynotes","find","notesobj","el","prepend","renderMynotes","append","sort","sort_li","b","appendTo","count","getMynotes","page","parseInt","notescount","lastpage","Math","ceil","perpage","updateMynotesInfo","mynotescount","paging","pagenum","prevlink","nextlink","createLink","noteinfo","lists","x","remove","deletelink","notedetail","coursename","userdate","timecreated","note_html","text","classname","classattribute","upperlimit","lowerlimit","each","registerActions","delegate","hide","siblings","isloaded","regex","RegExp","results","exec","nid","noteid","lastnotecounts","displayDialogue","get_strings","key","component","param","contextareas","done","s","tabsmenu","tabcontents","use","core","dialogue","draggable","modal","closeButton","headerContent","responsive","set","show","init","wwwroot","strtitle","editing","handler","editingicon_pos","body"],"mappings":"AAqBAA,OAAM,8BAAC,CAAC,QAAD,CAAW,UAAX,CAAuB,UAAvB,CAAmC,aAAnC,CAAkD,mBAAlD,CAAD,CAAyE,SAASC,CAAT,CAAYC,CAAZ,CAAeC,CAAf,CAA0C,IACjHC,CAAAA,CADiH,CAEjHC,CAAK,CAAG,CACRC,WAAW,CAAE,wCADL,CAFyG,CAKjHC,CAAS,CAAG,CACZC,YAAY,CAAE,eADF,CAEZC,cAAc,CAAE,iBAFJ,CAGZC,aAAa,CAAE,eAHH,CALqG,CAUjHC,CAAG,CAAG,CACNH,YAAY,CAAE,cADR,CAENC,cAAc,CAAE,gBAFV,CAGNC,aAAa,CAAE,cAHT,CAV2G,CAejHE,CAAK,CAAG,IAfyG,CAgBjHC,CAAS,CAAG,IAhBqG,CAiBjHC,CAAa,CAAGC,CAAC,CAACC,IAAF,CAAOC,UAAP,CAAkB,eAAlB,CAAmC,eAAnC,CAjBiG,CAyBjHC,CAAO,CAAG,CAEVC,sBAAsB,CAAE,gCAASC,CAAT,CAAkB,CACtC,GAAIC,CAAAA,CAAC,CAAGC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAR,CACAF,CAAC,CAACG,IAAF,CAASJ,CAAT,CACA,MAA0B,EAAlB,CAAAC,CAAC,CAACI,MAAF,CAASC,MAAV,CAAwBN,CAAxB,CAAkCA,CAAO,CAAG,GACtD,CANS,CAUVO,WAAW,CAAE,qBAASC,CAAT,CAAiB,CAC1B,GAAI,IAAAA,CAAJ,CAAqB,CACjB3B,CAAC,CAAC,oBAAsBG,CAAM,CAACyB,UAA7B,CAA0C,gBAA3C,CAAD,CAA8DC,IAA9D,CAAmE1B,CAAM,CAAC2B,4BAA1E,CACH,CAFD,IAEO,CACH,GAAIC,CAAAA,CAAE,CAAG/B,CAAC,CAAC,qBAAuBG,CAAM,CAACyB,UAA/B,CAAV,CACA,GAAgB,EAAZ,EAAAG,CAAE,CAACC,GAAH,EAAJ,CAAoB,CAChBhC,CAAC,CAAC,oBAAsBG,CAAM,CAACyB,UAA7B,CAA0C,gBAA3C,CAAD,CAA8DC,IAA9D,CAAmE,EAAnE,CACH,CAFD,IAEO,CACH,GAAII,CAAAA,CAAE,CAAG9B,CAAM,CAAC+B,oBAAP,CAA8BH,CAAE,CAACC,GAAH,GAASP,MAAhD,CACAzB,CAAC,CAAC,oBAAsBG,CAAM,CAACyB,UAA7B,CAA0C,gBAA3C,CAAD,CAA8DC,IAA9D,CAAmEf,CAAC,CAACC,IAAF,CAAOC,UAAP,CAAkB,gBAAlB,CAAoC,eAApC,EAAuDiB,CAA1H,CACH,CACJ,CACJ,CAtBS,CAuBVE,cAAc,CAAE,yBAAW,CACvB,GAAIJ,CAAAA,CAAE,CAAG/B,CAAC,CAAC,qBAAuBG,CAAM,CAACyB,UAA/B,CAAV,CACA,GAAIG,CAAE,CAACC,GAAH,GAASP,MAAT,EAAmBtB,CAAM,CAAC+B,oBAA9B,CAAoD,CAChDlC,CAAC,CAAC,mBAAD,CAAD,CAAuBoC,UAAvB,CAAkC,UAAlC,CAA8C,EAA9C,EACA,QACH,CAHD,IAGO,CACHpC,CAAC,CAAC,mBAAD,CAAD,CAAuBqC,IAAvB,CAA4B,UAA5B,CAAwC,UAAxC,EACA,QACH,CACD,QACH,CAjCS,CAkCVC,eAAe,CAAE,yBAASC,CAAT,CAAY,CACzB,GAAIR,CAAAA,CAAE,CAAG/B,CAAC,CAAC,qBAAuBG,CAAM,CAACyB,UAA/B,CAAV,CAEA,GAAI,CAACG,CAAL,CAAS,CACL,QACH,CACD,GAAIS,CAAAA,CAAK,CAAc,SAAV,EAAAD,CAAC,CAACE,IAAf,CACA,GAAID,CAAJ,CAAW,CACP,GAAIT,CAAE,CAACC,GAAH,IAAYlB,CAAC,CAACC,IAAF,CAAOC,UAAP,CAAkB,oBAAlB,CAAwC,eAAxC,CAAhB,CAA0E,CACtEe,CAAE,CAACC,GAAH,CAAO,EAAP,EACAhC,CAAC,CAAC,WAAD,CAAD,CAAe0C,GAAf,CAAmB,cAAnB,CAAmC,OAAnC,CACH,CACJ,CALD,IAKM,CACF,GAAgB,EAAZ,EAAAX,CAAE,CAACC,GAAH,EAAJ,CAAoB,CAChBD,CAAE,CAACC,GAAH,CAAOlB,CAAC,CAACC,IAAF,CAAOC,UAAP,CAAkB,oBAAlB,CAAwC,eAAxC,CAAP,EACAhB,CAAC,CAAC,WAAD,CAAD,CAAe0C,GAAf,CAAmB,cAAnB,CAAmC,MAAnC,EACA1C,CAAC,CAAC,oBAAsBG,CAAM,CAACyB,UAA7B,CAA0C,gBAA3C,CAAD,CAA8DC,IAA9D,CAAmE,EAAnE,CACH,CACJ,CACJ,CArDS,CAsDVc,OAAO,CAAE,iBAASC,CAAT,CAAe,IAChBC,CAAAA,CAAM,CAAG,EADO,CAEhBC,CAAK,CAAG,IAFQ,CAGpB,GAAIF,CAAI,MAAR,CAAmB,CACfE,CAAK,CAAGF,CAAI,MACf,CACDC,CAAM,YAAN,CAAwBC,CAAK,CAACC,UAAN,CAAiBC,OAAjB,CAAyB7C,CAAM,CAAC8C,MAAhC,CAAwC,EAAxC,CAAxB,CACAJ,CAAM,YAAN,CAAwBA,CAAM,YAAN,CAAsBG,OAAtB,CAA8B,GAA9B,CAAmC,EAAnC,CAAxB,CACA,GAAIJ,CAAI,CAACC,MAAT,CAAiB,CACb,IAAKK,CAAL,GAAUN,CAAAA,CAAI,CAACC,MAAf,CAAuB,CACnBA,CAAM,CAACK,CAAD,CAAN,CAAYN,CAAI,CAACC,MAAL,CAAYK,CAAZ,CACf,CACJ,CACDL,CAAM,QAAN,CAAsB/B,CAAC,CAACqC,GAAF,CAAMC,OAA5B,CAEA,GAAID,CAAAA,CAAG,CAAG,CACNE,MAAM,CAAE,MADF,CAENC,EAAE,CAAE,CACAC,KAAK,CAAE,gBAAW,CAEjB,CAHD,CAIAC,QAAQ,CAAE,kBAASC,CAAT,CAAYC,CAAZ,CAAcC,CAAd,CAAiB,CACvB,GAAI,CAACD,CAAL,CAAQ,CACJE,KAAK,CAAC,UAAD,CAAL,CACA,QACH,CACD,GAAIC,CAAAA,CAAI,CAAG5D,CAAC,CAAC6D,IAAF,CAAOC,KAAP,CAAaL,CAAC,CAACM,YAAf,CAAX,CACA,GAAIH,CAAI,CAACI,KAAT,CAAgB,CACZ,GAAkB,eAAd,EAAAJ,CAAI,CAACI,KAAT,CAAmC,CAC/BrB,CAAI,CAACsB,QAAL,CAAcT,CAAd,CAAiBI,CAAjB,CAAsBF,CAAtB,EACA,QACH,CACDC,KAAK,CAACC,CAAI,CAACI,KAAN,CAAL,CACA,QACH,CAPD,IAOO,CACHrB,CAAI,CAACsB,QAAL,CAAcT,CAAd,CAAiBI,CAAjB,CAAsBF,CAAtB,EACA,QACH,CACJ,CArBD,CAFE,CAyBNQ,SAAS,CAAE,CACPrB,KAAK,CAAEA,CADA,CAzBL,CA4BNsB,OAAO,CAAE,CACL,eAAgB,kDADX,CA5BH,CA+BNP,IAAI,CAAEQ,iBAAiB,CAACxB,CAAD,CA/BjB,CAAV,CAiCA,GAAID,CAAI,CAAC0B,IAAT,CAAe,CACXnB,CAAG,CAACmB,IAAJ,CAAW1B,CAAI,CAAC0B,IACnB,CACDrE,CAAC,CAACsE,EAAF,CAAK,KAAKC,GAAV,CAAerB,CAAf,CACH,CA1GS,CA2GVsB,WAAW,CAAE,qBAASlC,CAAT,CAAY,CACrBA,CAAC,CAACmC,cAAF,GACA,GAAI5B,CAAAA,CAAK,CAAG,IAAZ,CAEA,GAAI,IAAAA,CAAK,CAACX,cAAN,EAAJ,CAAqC,CACjC,QACH,CACD,GAAIJ,CAAAA,CAAE,CAAG/B,CAAC,CAAC,qBAAuBG,CAAM,CAACyB,UAA/B,CAAV,CACA,GAAgB,EAAZ,EAAAG,CAAE,CAACC,GAAH,IAAkBD,CAAE,CAACC,GAAH,IAAYlB,CAAC,CAACC,IAAF,CAAOC,UAAP,CAAkB,oBAAlB,CAAwC,eAAxC,CAAlC,CAA4F,CACxF,QACH,CACD,GAAI2D,CAAAA,CAAG,CAAG,CACNC,SAAS,CAAEzE,CAAM,CAACyE,SADZ,CAENC,OAAO,CAAE9C,CAAE,CAACC,GAAH,EAFH,CAGN8C,MAAM,CAAE,KAHF,CAINC,WAAW,CAAEjC,CAAK,CAACkC,eAJb,CAAV,CAMAjD,CAAE,CAACM,IAAH,CAAQ,UAAR,KACAN,CAAE,CAACW,GAAH,CAAO,CACH,gBAAmB,OAAS5B,CAAC,CAACC,IAAF,CAAOkE,SAAP,CAAiB,iBAAjB,CAAoC,MAApC,CAAT,CAAuD,GADvE,CAEH,iBAAoB,WAFjB,CAGH,mBAAsB,eAHnB,CAAP,EAKA,KAAKtC,OAAL,CAAa,CACLE,MAAM,CAAE8B,CADH,CAELT,QAAQ,CAAE,kBAAST,CAAT,CAAayB,CAAb,CAAwB,CAC9B,GAAI,CAACA,CAAG,CAACC,KAAT,CAAgB,CACZ,QACH,CACDnF,CAAC,CAAC,oBAAsBG,CAAM,CAACyB,UAA7B,CAA0C,gBAA3C,CAAD,CAA8DC,IAA9D,CAAmE,EAAnE,EACA7B,CAAC,CAAC,qBAAuBG,CAAM,CAACyB,UAA/B,CAAD,CAA4CI,GAA5C,CAAgDlB,CAAC,CAACC,IAAF,CAAOC,UAAP,CAAkB,oBAAlB,CAAwC,eAAxC,CAAhD,EACAhB,CAAC,CAAC,qBAAuBG,CAAM,CAACyB,UAA/B,CAAD,CAA4CQ,UAA5C,CAAuD,UAAvD,EACApC,CAAC,CAAC,qBAAuBG,CAAM,CAACyB,UAA/B,CAAD,CAA4Cc,GAA5C,CAAgD,CAAC0C,eAAe,CAAE,EAAlB,CAAhD,EACA,GAAItC,CAAK,CAACC,UAAN,EAAoBD,CAAK,CAACuC,UAA9B,CAA0C,CACtCvC,CAAK,CAACC,UAAN,CAAmBD,CAAK,CAACuC,UAAzB,CACA,GAAIC,CAAAA,CAAG,CAAGxC,CAAK,CAACC,UAAN,CAAiBC,OAAjB,CAAyB,GAAzB,CAA8B,OAA9B,CAAV,CACAhD,CAAC,CAACM,CAAS,CAACC,YAAV,CAAyB,kBAA1B,CAAD,CAA+CgF,WAA/C,CAA2D,SAA3D,EACAvF,CAAC,CAACM,CAAS,CAACC,YAAV,CAAyB,GAAzB,CAA+B+E,CAAhC,CAAD,CAAsCE,QAAtC,CAA+C,SAA/C,EACAxF,CAAC,CAACM,CAAS,CAACC,YAAV,CAAyB,eAA1B,CAAD,CAA4CkF,GAA5C,CAAgD3C,CAAK,CAACC,UAAtD,EAAkEyC,QAAlE,CAA2E,SAA3E,EACAxF,CAAC,CAACM,CAAS,CAACC,YAAV,CAAyB,eAA1B,CAAD,CAA4CmF,GAA5C,CAAgD5C,CAAK,CAACC,UAAtD,EAAkEL,GAAlE,CAAsE,SAAtE,CAAiF,MAAjF,EACA1C,CAAC,CAACM,CAAS,CAACC,YAAV,CAAyB,GAAzB,CAA+BuC,CAAK,CAACC,UAArC,CAAkD,cAAnD,CAAD,CAAoEL,GAApE,CAAwE,SAAxE,CAAmF,OAAnF,CACH,CACDI,CAAK,CAAC6C,SAAN,CAAgBT,CAAhB,CAAqB,KAArB,EACApC,CAAK,CAAC8C,cAAN,GACA5F,CAAC,CAACM,CAAS,CAACC,YAAX,CAAD,CAA0BsF,IAA1B,CAA+B,eAA/B,EAAgDhE,IAAhD,CAAqDf,CAAC,CAACC,IAAF,CAAOC,UAAP,CAAkB,cAAlB,CAAkC,eAAlC,CAArD,CACH,CAtBI,CAAb,CAyBH,CA3JS,CA4JV2E,SAAS,CAAE,mBAASG,CAAT,CAA8B,IAAXhB,CAAAA,CAAW,wDAAJ,EAAI,CACjChC,CAAK,CAAG,IADyB,CAEjCiD,CAAE,CAAG/F,CAAC,CAACM,CAAS,CAACC,YAAX,CAAD,CAA0BsF,IAA1B,CAA+B/C,CAAK,CAACC,UAAN,CAAmB,OAAlD,CAF4B,CAGrC,GAAc,KAAV,EAAA+B,CAAJ,CAAqB,CACjBiB,CAAE,CAACC,OAAH,CAAWlD,CAAK,CAACmD,aAAN,CAAoBH,CAAQ,CAACX,KAA7B,CAAX,CACH,CAFD,IAEO,CACHY,CAAE,CAACG,MAAH,CAAUpD,CAAK,CAACmD,aAAN,CAAoBH,CAAQ,CAACX,KAA7B,CAAV,EACAnF,CAAC,CAAC+F,CAAD,CAAD,CAAMF,IAAN,CAAW,IAAX,EAAiBM,IAAjB,CAGA,QAASC,CAAAA,OAAT,CAAiBhF,CAAjB,CAAoBiF,CAApB,CAAsB,CAClB,MAAQrG,CAAAA,CAAC,CAACqG,CAAD,CAAD,CAAKxC,IAAL,CAAU,QAAV,CAAD,CAAyB7D,CAAC,CAACoB,CAAD,CAAD,CAAKyC,IAAL,CAAU,QAAV,CAAzB,CAAgD,CAAhD,CAAoD,CAAC,CAC/D,CALD,EACGyC,QADH,CACYP,CADZ,CAMH,CACD/F,CAAC,CAACM,CAAS,CAACC,YAAX,CAAD,CAA0BsF,IAA1B,CAA+B/C,CAAK,CAACC,UAArC,EAAiDV,IAAjD,CAAsD,aAAtD,CAAqEyD,CAAQ,CAACS,KAA9E,CACH,CA3KS,CA4KVC,UAAU,CAAE,qBAAiB,IAARC,CAAAA,CAAQ,wDAAH,CAAG,CACrB3D,CAAK,CAAG,IADa,CAEzB2D,CAAI,CAAGC,QAAQ,CAACD,CAAD,CAAf,CAFyB,GAGrBV,CAAAA,CAAE,CAAG/F,CAAC,CAACM,CAAS,CAACC,YAAX,CAAD,CAA0BsF,IAA1B,CAA+B/C,CAAK,CAACC,UAAN,CAAmB,OAAlD,CAHgB,CAIrB4D,CAAU,CAAGZ,CAAE,CAACF,IAAH,CAAQ,IAAR,EAAcpE,MAJN,CAKrBmF,CAAQ,CAAGC,IAAI,CAACC,IAAL,CAAUH,CAAU,CAAGxG,CAAM,CAAC4G,OAA9B,CALU,CAMzB,GAAiB,CAAb,CAAAJ,CAAU,EAAQC,CAAQ,CAAGH,CAAjC,CAAuC,CACnC3D,CAAK,CAAC8C,cAAN,GACA,QACH,CACD,GAAIjB,CAAAA,CAAG,CAAG,CACNC,SAAS,CAAEzE,CAAM,CAACyE,SADZ,CAENE,MAAM,CAAE,KAFF,CAGN2B,IAAI,CAAEA,CAHA,CAAV,CAKA,KAAK9D,OAAL,CAAa,CACTE,MAAM,CAAE8B,CADC,CAETT,QAAQ,CAAE,kBAAST,CAAT,CAAayB,CAAb,CAAwB,CAC9BpC,CAAK,CAAC6C,SAAN,CAAgBT,CAAhB,EACApC,CAAK,CAAC8C,cAAN,EACH,CALQ,CAAb,CAOH,CAlMS,CAmMVoB,iBAAiB,CAAE,2BAASC,CAAT,CAAuBR,CAAvB,CAA6B,CAC5CA,CAAI,CAAGC,QAAQ,CAACD,CAAD,CAAf,CACAQ,CAAY,CAAGP,QAAQ,CAACO,CAAD,CAAvB,CAF4C,GAGxCnE,CAAAA,CAAK,CAAG,IAHgC,CAIxCoE,CAAM,CAAG,EAJ+B,CAK5C,GAAID,CAAY,CAAG9G,CAAM,CAAC4G,OAA1B,CAAmC,IAC3BI,CAAAA,CAAO,CAAGV,CAAI,CAAG,CADU,CAE3BW,CAAQ,CAAG,EAFgB,CAG3BC,CAAQ,CAAG,EAHgB,CAK/B,GAAW,CAAP,CAAAZ,CAAJ,CAAc,CACVW,CAAQ,CAAGtE,CAAK,CAACwE,UAAN,CAAiBH,CAAjB,CAA0BrG,CAAC,CAACC,IAAF,CAAOC,UAAP,CAAkB,cAAlB,CAAkC,eAAlC,CAA1B,CAA8E,UAA9E,CACd,CACD,GAAqB,CAAjB,CAAAb,CAAM,CAAC4G,OAAX,CAAwB,CACpB,GAAIH,CAAAA,CAAQ,CAAGC,IAAI,CAACC,IAAL,CAAUG,CAAY,CAAG9G,CAAM,CAAC4G,OAAhC,CAClB,CAFD,IAEO,CACH,GAAIH,CAAAA,CAAQ,CAAG,CAClB,CAGDO,CAAO,CAAGV,CAAI,CAAG,CAAjB,CACA,GAAIU,CAAO,EAAIP,CAAf,CAAyB,CACrBS,CAAQ,CAAGvE,CAAK,CAACwE,UAAN,CAAiBH,CAAjB,CAA0BrG,CAAC,CAACC,IAAF,CAAOC,UAAP,CAAkB,UAAlB,CAA8B,eAA9B,CAA1B,CAA0E,MAA1E,CACd,CACDkG,CAAM,CAAGE,CAAT,CACA,GAAgB,EAAZ,EAAAA,CAAQ,EAAsB,EAAZ,EAAAC,CAAtB,CAAsC,CAClCH,CAAM,EAAI,mCACb,CACDA,CAAM,EAAIG,CAAV,CAEAH,CAAM,CAAG,0BAA0BA,CAA1B,CAAmC,SAC/C,CACD,GAAIK,CAAAA,CAAQ,CAAGvH,CAAC,CAACM,CAAS,CAACC,YAAX,CAAD,CAA0BsF,IAA1B,CAA+B/C,CAAK,CAACC,UAArC,CAAf,CACA,GAAmB,CAAf,CAAAkE,CAAJ,CAAsB,CAClBM,CAAQ,CAAC1B,IAAT,CAAc,QAAd,EAAwBhE,IAAxB,CAA6Bf,CAAC,CAACC,IAAF,CAAOC,UAAP,CAAkB,cAAlB,CAAkC,eAAlC,EAAqD,EAArD,CAA0DiG,CAAvF,CACH,CAFD,IAEO,CACHM,CAAQ,CAAC1B,IAAT,CAAc,QAAd,EAAwBhE,IAAxB,CAA6Bf,CAAC,CAACC,IAAF,CAAOC,UAAP,CAAkB,kBAAlB,CAAsC,eAAtC,CAA7B,CACH,CACDuG,CAAQ,CAAC1B,IAAT,CAAc,iBAAd,EAAiChE,IAAjC,CAAsCqF,CAAtC,CACH,CA1OS,CA8OVjB,aAAa,CAAE,uBAASd,CAAT,CAAgB,CAC3B,GAAmB,CAAf,CAAAA,CAAK,CAAC1D,MAAV,CAAsB,CAClB,QACH,CAH0B,GAIvB+F,CAAAA,CAAK,CAAG,EAJe,CAKvBC,CAAC,CAAG,EALmB,CAM3B,IAAKA,CAAL,GAAUtC,CAAAA,CAAV,CAAiB,CACbnF,CAAC,CAAC,WAAYG,CAAM,CAACyB,UAAnB,CAAgC,GAAhC,CAAsCuD,CAAK,CAACsC,CAAD,CAAL,CAAShE,EAAhD,CAAD,CAAqDiE,MAArD,GADa,GAETC,CAAAA,CAAU,CAAG,oCAAmCxH,CAAM,CAACyB,UAA1C,CAAuD,GAAvD,CAA6DuD,CAAK,CAACsC,CAAD,CAAL,CAAShE,EAAtE,CAA2E,qCAA3E,CAA8G5C,CAA9G,CAA6H,KAA7H,CAAmIT,CAAK,CAACC,WAAzI,CAAsJ,MAF1J,CAGTuH,CAAU,CAAG,EAHJ,CAIb,GAA2B,EAAvB,EAAAzC,CAAK,CAACsC,CAAD,CAAL,CAASI,UAAb,CAA+B,CAC3BD,CAAU,CAAG,8BAA8BzC,CAAK,CAACsC,CAAD,CAAL,CAASI,UAAvC,YAChB,CANY,GAOTC,CAAAA,CAAQ,CAAG,uBAAuB3C,CAAK,CAACsC,CAAD,CAAL,CAASM,WAAhC,CAA8C,QAPhD,CAQTC,CAAS,CAAG,0BAA0BL,CAA1B,CAAuCxC,CAAK,CAACsC,CAAD,CAAL,CAAS5C,OAAhD,CAA0D,QAR7D,CASb2C,CAAK,EAAI,mBAAoBrH,CAAM,CAACyB,UAA3B,CAAwC,GAAxC,CAA8CuD,CAAK,CAACsC,CAAD,CAAL,CAAShE,EAAvD,CAA4D,mBAA5D,CAAgF0B,CAAK,CAACsC,CAAD,CAAL,CAAShE,EAAzF,CAA8F,KAA9F,CAAqGuE,CAArG,CAAiHJ,CAAjH,CAA8HE,CAA9H,CAAyI,OACrJ,CACD,MAAON,CAAAA,CACV,CAhQS,CAiQVF,UAAU,CAAE,oBAASb,CAAT,CAAewB,CAAf,CAAqBC,CAArB,CAAgC,CACxC,GAAIC,CAAAA,CAAc,CAAyB,WAArB,QAAOD,CAAAA,CAAR,CAAqC,YAAWA,CAAX,CAAqB,IAA1D,CAAgE,EAArF,CACA,MAAO,aAAc,KAAK1D,GAAnB,CAAyB,QAAzB,CAAoCiC,CAApC,CAA2C,IAA3C,CAAiD0B,CAAjD,CAAkE,GAAlE,CAAwEF,CAAxE,CAA+E,MACzF,CApQS,CAqQVrC,cAAc,CAAE,yBAAW,IACnB9C,CAAAA,CAAK,CAAG,IADW,CAEnB2D,CAAI,CAAGC,QAAQ,CAAC1G,CAAC,CAACM,CAAS,CAACC,YAAX,CAAD,CAA0BsF,IAA1B,CAA+B/C,CAAK,CAACC,UAArC,EAAiDV,IAAjD,CAAsD,QAAtD,CAAD,CAFI,CAGnB4E,CAAY,CAAGP,QAAQ,CAAC1G,CAAC,CAACM,CAAS,CAACC,YAAX,CAAD,CAA0BsF,IAA1B,CAA+B/C,CAAK,CAACC,UAArC,EAAiDV,IAAjD,CAAsD,aAAtD,CAAD,CAHJ,CAInB0D,CAAE,CAAG/F,CAAC,CAACM,CAAS,CAACC,YAAX,CAAD,CAA0BsF,IAA1B,CAA+B,IAAM/C,CAAK,CAACC,UAAZ,CAAyB,OAAxD,CAJc,CAKnB4D,CAAU,CAAGZ,CAAE,CAACF,IAAH,CAAQ,IAAR,EAAcpE,MALR,CAMnBmF,CAAQ,CAAGC,IAAI,CAACC,IAAL,CAAUH,CAAU,CAAGxG,CAAM,CAAC4G,OAA9B,CANQ,CAQvB,GAAiB,CAAb,CAAAJ,CAAU,EAAQC,CAAQ,EAAIH,CAAlC,CAAwC,CACpCA,CAAI,CAAGG,CAAQ,CAAG,CACrB,CAVsB,GAWnBwB,CAAAA,CAAU,CAAG3B,CAAI,CAAGtG,CAAM,CAAC4G,OAAd,CAAwB5G,CAAM,CAAC4G,OAXzB,CAYnBsB,CAAU,CAAG5B,CAAI,CAAGtG,CAAM,CAAC4G,OAZR,CAavBhB,CAAE,CAACF,IAAH,CAAQ,IAAR,EAAcnD,GAAd,CAAkB,SAAlB,CAA6B,MAA7B,EACAqD,CAAE,CAACF,IAAH,CAAQ,IAAR,EAAcyC,IAAd,CAAmB,SAASpF,CAAT,CAAY6C,CAAZ,CAAgB,CAC/B,GAAI7C,CAAC,EAAEmF,CAAH,EAAiBnF,CAAC,CAACkF,CAAvB,CAAmC,CAC/BpI,CAAC,CAAC+F,CAAD,CAAD,CAAMrD,GAAN,CAAU,SAAV,CAAqB,OAArB,CACH,CACJ,CAJD,EAKAI,CAAK,CAACkE,iBAAN,CAAwBC,CAAxB,CAAsCR,CAAtC,CAEH,CA1RS,CA2RV8B,eAAe,CAAE,0BAAW,CACxB,GAAIzF,CAAAA,CAAK,CAAG,IAAZ,CAEA9C,CAAC,CAAC,MAAD,CAAD,CAAUwI,QAAV,CAAmB,mBAAnB,CAAwC,OAAxC,CAAiD,UAAW,CAAC7H,CAAK,CAAC8H,IAAN,EAAa,CAA1E,EACAzI,CAAC,CAAC,MAAD,CAAD,CAAUwI,QAAV,CAAmB,mBAAnB,CAAwC,OAAxC,CAAiD,SAASjG,CAAT,CAAY,CAACO,CAAK,CAAC2B,WAAN,CAAkBlC,CAAlB,CAAqB,CAAnF,EAEAvC,CAAC,CAAC,MAAD,CAAD,CAAUwI,QAAV,CAAmBlI,CAAS,CAACC,YAAV,CAAyB,kBAA5C,CAAgE,OAAhE,CAAyE,UAAY,CACjFP,CAAC,CAAC,IAAD,CAAD,CAAQwF,QAAR,CAAiB,SAAjB,EACAxF,CAAC,CAAC,IAAD,CAAD,CAAQ0I,QAAR,GAAmBnD,WAAnB,CAA+B,SAA/B,EACA,GAAID,CAAAA,CAAG,CAAGtF,CAAC,CAAC,IAAD,CAAD,CAAQqC,IAAR,CAAa,IAAb,EAAmBW,OAAnB,CAA2B,MAA3B,CAAmC,EAAnC,CAAV,CACAhD,CAAC,CAACM,CAAS,CAACC,YAAV,CAAyB,eAA1B,CAAD,CAA4CmF,GAA5C,CAAgD,IAAMJ,CAAtD,EAA2D5C,GAA3D,CAA+D,SAA/D,CAA0E,MAA1E,EACA1C,CAAC,CAACM,CAAS,CAACC,YAAV,CAAyB,IAAzB,CAAgC+E,CAAhC,CAAsC,cAAvC,CAAD,CAAwD5C,GAAxD,CAA4D,SAA5D,CAAuE,OAAvE,EACAI,CAAK,CAACC,UAAN,CAAmB,IAAIuC,CAAvB,CAEA,GAAIqD,CAAAA,CAAQ,CAAG3I,CAAC,CAAC8C,CAAK,CAACC,UAAP,CAAD,CAAoBV,IAApB,CAAyB,aAAzB,CAAf,CACA,GAAuB,WAAnB,QAAOsG,CAAAA,CAAP,EAAkC,IAAAA,CAAtC,CAAyD,CACrD3I,CAAC,CAACM,CAAS,CAACC,YAAX,CAAD,CAA0BsF,IAA1B,CAA+B/C,CAAK,CAACC,UAArC,EAAiDV,IAAjD,CAAsD,aAAtD,CAAqE,MAArE,EACAS,CAAK,CAAC0D,UAAN,CAAiB,CAAjB,CACH,CACJ,CAbD,EAeAxG,CAAC,CAAC,MAAD,CAAD,CAAUwI,QAAV,CAAmB,qBAAuBrI,CAAM,CAACyB,UAAjD,CAA6D,YAA7D,CAA2E,SAASW,CAAT,CAAY,CACnFO,CAAK,CAACR,eAAN,CAAsBC,CAAtB,CACH,CAFD,EAGAvC,CAAC,CAAC,MAAD,CAAD,CAAUwI,QAAV,CAAmB,qBAAuBrI,CAAM,CAACyB,UAAjD,CAA6D,uBAA7D,CAAsF,UAAY,CAC9FkB,CAAK,CAACpB,WAAN,CAAkBoB,CAAK,CAACX,cAAN,EAAlB,CACH,CAFD,EAIAnC,CAAC,CAAC,MAAD,CAAD,CAAUwI,QAAV,CAAmBlI,CAAS,CAACC,YAAV,CAAyB,4BAA5C,CAA0E,OAA1E,CAAmF,SAASgC,CAAT,CAAY,CAC3FA,CAAC,CAACmC,cAAF,GAD2F,GAEvFkE,CAAAA,CAAK,CAAG,GAAIC,CAAAA,MAAJ,CAAW,iBAAX,CAF+E,CAGvFC,CAAO,CAAGF,CAAK,CAACG,IAAN,CAAW/I,CAAC,CAAC,IAAD,CAAD,CAAQqC,IAAR,CAAa,MAAb,CAAX,CAH6E,CAIvFoE,CAAI,CAAG,CAJgF,CAK3F,GAAIqC,CAAO,CAAC,CAAD,CAAX,CAAgB,CACZrC,CAAI,CAAGqC,CAAO,CAAC,CAAD,CACjB,CACD9I,CAAC,CAACM,CAAS,CAACC,YAAX,CAAD,CAA0BsF,IAA1B,CAA+B/C,CAAK,CAACC,UAArC,EAAiDV,IAAjD,CAAsD,QAAtD,CAAgEqE,QAAQ,CAACD,CAAD,CAAxE,EACA3D,CAAK,CAAC0D,UAAN,CAAiBC,CAAjB,CACH,CAVD,EAWAzG,CAAC,CAAC,MAAD,CAAD,CAAUwI,QAAV,CAAmBlI,CAAS,CAACC,YAAV,CAAyB,kBAA5C,CAAgE,OAAhE,CAAyE,SAASgC,CAAT,CAAY,CACjFA,CAAC,CAACmC,cAAF,GACA,GAAIsE,CAAAA,CAAG,CAAGhJ,CAAC,CAAC,IAAD,CAAD,CAAQqC,IAAR,CAAa,IAAb,CAAV,CACA,GAAW,EAAP,EAAA2G,CAAG,EAAiB,WAAP,EAAAA,CAAjB,CAAqC,IAC7BrC,CAAAA,CAAU,CAAG3G,CAAC,CAACM,CAAS,CAACC,YAAX,CAAD,CAA0BsF,IAA1B,CAA+BvF,CAAS,CAACG,aAAV,CAA0B,GAA1B,CAAgCqC,CAAK,CAACC,UAAtC,CAAmD,OAAlF,EAA2FtB,MAD3E,CAE7BgC,CAAE,CAAGuF,CAAG,CAAChG,OAAJ,CAAY,iBAAkB7C,CAAM,CAACyB,UAAzB,CAAsC,GAAlD,CAAuD,EAAvD,CAFwB,CAG7B+C,CAAG,CAAG,CACNC,SAAS,CAAEzE,CAAM,CAACyE,SADZ,CAENE,MAAM,CAAE,QAFF,CAGNmE,MAAM,CAAExF,CAHF,CAINyF,cAAc,CAAEvC,CAJV,CAHuB,CASjC7D,CAAK,CAACH,OAAN,CAAc,CACVE,MAAM,CAAE8B,CADE,CAEVT,QAAQ,CAAE,kBAAST,CAAT,CAAayB,CAAb,CAAkBtC,CAAlB,CAAwB,CAC9BA,CAAI,CAACE,KAAL,CAAW6C,SAAX,CAAqBT,CAArB,EACAlF,CAAC,CAAC,WAAYG,CAAM,CAACyB,UAAnB,CAAgC,GAAhC,CAAsCsD,CAAG,CAAC+D,MAA3C,CAAD,CAAoDvB,MAApD,GACA9E,CAAI,CAACE,KAAL,CAAW8C,cAAX,EACH,CANS,CAAd,CAQH,CACJ,CArBD,CAsBH,CAxVS,CAyVVuD,eAAe,CAAE,0BAAY,CACzB,GAAIrG,CAAAA,CAAK,CAAG7B,CAAZ,CACA,GAAc,IAAV,GAAAN,CAAJ,CAAoB,CAChBT,CAAG,CAACkJ,WAAJ,CAAgB,CACZ,CAACC,GAAG,CAAG,SAAP,CAAkBC,SAAS,CAAG,eAA9B,CADY,CAEZ,CAACD,GAAG,CAAG,gBAAP,CAAyBC,SAAS,CAAG,eAArC,CAFY,CAGZ,CAACD,GAAG,CAAG,MAAP,CAAeC,SAAS,CAAG,eAA3B,CAHY,CAIZ,CAACD,GAAG,CAAG,QAAP,CAJY,CAKZ,CAACA,GAAG,CAAG,sBAAP,CAA+BC,SAAS,CAAG,eAA3C,CAA4DC,KAAK,CAAEpJ,CAAM,CAACqJ,YAAP,CAAoB1G,CAAK,CAACkC,eAA1B,CAAnE,CALY,CAMZ,CAACqE,GAAG,CAAG,oBAAP,CAA6BC,SAAS,CAAG,eAAzC,CANY,CAAhB,EAOGG,IAPH,CAOQ,SAASC,CAAT,CAAY,CAEhB,GAAI3D,CAAAA,CAAE,CAAG/F,CAAC,CAAC,aAAD,CAAD,CAAiBkG,MAAjB,CAAwBlG,CAAC,CAAC,aAAcU,CAAG,CAACH,YAAlB,CAAiC,aAAjC,CAA+CG,CAAG,CAACH,YAAnD,CAAkE,WAAnE,CAAD,CAC5B2F,MAD4B,CACrB,wFAAqF/F,CAAM,CAACyB,UAA5F,CAAyG,KAAzG,CAAgH8H,CAAC,CAAC,CAAD,CAAjH,CAAuH,GAAvH,CAA6HvJ,CAAM,CAAC+B,oBAApI,iGACsD/B,CAAM,CAACyB,UAD7D,CAC0E,uCAD1E,CAC+G8H,CAAC,CAAC,CAAD,CADhH,gDAE0BA,CAAC,CAAC,CAAD,CAF3B,wFADqB,EAOxBxD,MAPwB,CAOjBlG,CAAC,CAAC,+BAAD,CAPgB,EAQxBkG,MARwB,CAQjBlG,CAAC,CAAC,2BAAD,CARgB,CAAxB,CAAT,CAUA+F,CAAE,CAACF,IAAH,CAAQ,mBAAR,EAA6BxD,IAA7B,CAAkC,OAAlC,CAA2CqH,CAAC,CAAC,CAAD,CAA5C,EACA3D,CAAE,CAACF,IAAH,CAAQ,mBAAR,EAA6BxD,IAA7B,CAAkC,OAAlC,CAA2CqH,CAAC,CAAC,CAAD,CAA5C,EAbgB,GAcZC,CAAAA,CAAQ,CAAG,EAdC,CAeZC,CAAW,CAAG,EAfF,CAgBZ1G,CAAC,CAAG,EAhBQ,CAiBhB,IAAKA,CAAL,GAAU/C,CAAAA,CAAM,CAACqJ,YAAjB,CAA+B,CAC3B,GAAI1G,CAAK,CAACkC,eAAN,EAAyB9B,CAA7B,CAAgC,CAC5ByG,CAAQ,EAAI,kCAAiCxJ,CAAM,CAAC8C,MAAxC,CAAiDC,CAAjD,CAAqD,8BAArD,CAAmF/C,CAAM,CAACqJ,YAAP,CAAoBtG,CAApB,CAAnF,CAA4G,aAC3H,CAFD,IAEO,CACHyG,CAAQ,EAAI,2BAA0BxJ,CAAM,CAAC8C,MAAjC,CAA0CC,CAA1C,CAA8C,8BAA9C,CAA4E/C,CAAM,CAACqJ,YAAP,CAAoBtG,CAApB,CAA5E,CAAqG,aACpH,CACD0G,CAAW,EAAI,mCAAkCzJ,CAAM,CAAC8C,MAAzC,CAAkDC,CAAlD,8IAEI/C,CAAM,CAAC8C,MAFX,CAEoBC,CAFpB,8CAIlB,CACD6C,CAAE,CAACF,IAAH,CAAQ,YAAR,EAAsBK,MAAtB,CAA6ByD,CAA7B,EACA5D,CAAE,CAACF,IAAH,CAAQ,MAAR,EAAgBK,MAAhB,CAAuBlG,CAAC,CAAC4J,CAAD,CAAxB,EACA3J,CAAC,CAAC4J,GAAF,CAAM,mCAAN,CAA2C,UAAW,CAClDlJ,CAAK,CAAG,GAAIG,CAAAA,CAAC,CAACgJ,IAAF,CAAOC,QAAX,CAAoB,CACxBC,SAAS,GADe,CAExBC,KAAK,GAFmB,CAGxBC,WAAW,GAHa,CAIxBC,aAAa,CAAErJ,CAAC,CAACC,IAAF,CAAOC,UAAP,CAAkB,SAAlB,CAA6B,eAA7B,CAJS,CAKxBoJ,UAAU,GALc,CAApB,CAAR,CAOAzJ,CAAK,CAAC0J,GAAN,CAAU,aAAV,CAAyBtE,CAAE,CAAClE,IAAH,EAAzB,EACA,GAAkB,IAAd,GAAAjB,CAAJ,CAAwB,CACpBA,CAAS,GAAT,CAEAkC,CAAK,CAAC0D,UAAN,CAAiB,CAAjB,EACAxG,CAAC,CAACM,CAAS,CAACC,YAAX,CAAD,CAA0BsF,IAA1B,CAA+B/C,CAAK,CAACC,UAArC,EAAiDV,IAAjD,CAAsD,aAAtD,CAAqE,MAArE,EACArC,CAAC,CAACM,CAAS,CAACC,YAAX,CAAD,CAA0BsF,IAA1B,CAA+B/C,CAAK,CAACC,UAArC,EAAiDL,GAAjD,CAAqD,SAArD,CAAgE,OAAhE,CACH,CACD/B,CAAK,CAAC2J,IAAN,EACH,CAjBD,EAkBAxH,CAAK,CAACyF,eAAN,EAEH,CAzDD,CA0DH,CA3DD,IA2DO,CACH5H,CAAK,CAAC2J,IAAN,EACH,CACJ,CAzZS,CAuaVC,IAAI,CAAE,cAAS3H,CAAT,CAAe,CACjBzC,CAAM,CAAGyC,CAAT,CACAzC,CAAM,CAAC8C,MAAP,CAAgB,UAAhB,CACA,KAAK8D,OAAL,CAAeL,QAAQ,CAACvG,CAAM,CAAC4G,OAAR,CAAvB,CACA,KAAKhE,UAAL,CAAkB,YAAcH,CAAI,CAACoC,eAArC,CACA,KAAKK,UAAL,CAAkB,YAAczC,CAAI,CAACoC,eAArC,CACA,KAAKA,eAAL,CAAuBpC,CAAI,CAACoC,eAA5B,CACA,KAAKR,GAAL,CAAW,KAAKtD,sBAAL,CAA4BJ,CAAC,CAACqC,GAAF,CAAMqH,OAAN,CAAc,kCAA1C,CAAX,CAEA,GAAIC,CAAAA,CAAQ,CAAI3J,CAAC,CAACC,IAAF,CAAOC,UAAP,CAAkB,aAAlB,CAAiC,eAAjC,CAAhB,CACA,GAAI,CAACb,CAAM,CAACuK,OAAZ,CAAqB,CACjB,GAAIC,CAAAA,CAAO,CAAG3K,CAAC,CAAC,gBAAgBU,CAAG,CAACF,cAApB,CAAoC,aAApC,CAAkDiK,CAAlD,CAA6D,WAA7D,CAAyEA,CAAzE,CAAmF,KAAnF,CAA0F3J,CAAC,CAACC,IAAF,CAAOC,UAAP,CAAkB,SAAlB,CAA6B,eAA7B,CAA1F,CAA0I,QAA3I,CAAf,CACA2J,CAAO,CAACnF,QAAR,CAAiBrF,CAAM,CAACyK,eAAxB,EACA5K,CAAC,CAAC,MAAD,CAAD,CAAUkG,MAAV,CAAiByE,CAAjB,EACAA,CAAO,CAAC9I,IAAR,CAAa,wCAAb,CACH,CALD,IAKO,CACH,GAAI8I,CAAAA,CAAO,CAAG3K,CAAC,CAAC,gBAAgBU,CAAG,CAACF,cAApB,CAAoC,aAApC,CAAkDiK,CAAlD,CAA6D,WAA7D,CAAyEA,CAAzE,CAAmF,KAAnF,CAA0F3J,CAAC,CAACC,IAAF,CAAOC,UAAP,CAAkB,SAAlB,CAA6B,eAA7B,CAA1F,CAA0I,QAA3I,CAAf,CACA2J,CAAO,CAACnF,QAAR,CAAiBrF,CAAM,CAACyK,eAAxB,EACAD,CAAO,CAAC9I,IAAR,CAAa,wCAAb,EACA7B,CAAC,CAAC,WAAYU,CAAG,CAACF,cAAjB,CAAD,CAAkCqB,IAAlC,CAAuC8I,CAAvC,EACA3K,CAAC,CAAC,WAAYU,CAAG,CAACF,cAAjB,CAAD,CAAkC0F,MAAlC,CAAyC,wCAAwCxF,CAAG,CAACF,cAA5C,CAA4D,KAA5D,CAAmEiK,CAAnE,CAA8E,QAAvH,CACH,CACD,GAAII,CAAAA,CAAI,CAAG7K,CAAC,CAAC,MAAD,CAAZ,CACA6K,CAAI,CAACrC,QAAL,CAAclI,CAAS,CAACE,cAAxB,CAAwC,OAAxC,CAAiD,KAAK2I,eAAtD,CACH,CA/bS,CAzBuG,CA0drH,MAAOlI,CAAAA,CACV,CA3dK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Javascript controller for the mynotes panel at the bottom of the page.\n *\n * @module     block_mynotes/mynotesblock\n * @author     Gautam Kumar Das<gautam.arg@gmail.com>\n */\ndefine(['jquery', 'core/yui', 'core/str', 'core/config', 'core/notification'], function($, Y, str, config, notification) {\n    var CONFIG;\n    var NODES = {\n        DELETE_ICON: '<span class=\"delete\">&#x274C;</span>',\n    };\n    var SELECTORS = {\n        MYNOTES_BASE: '#mynotes_base',\n        MYNOTES_OPENER: '.mynotes-opener',\n        MYNOTES_LISTS: '.mynotes_list',\n    };\n    var CSS = {\n        MYNOTES_BASE: 'mynotes_base',\n        MYNOTES_OPENER: 'mynotes-opener',\n        MYNOTES_LISTS: 'mynotes_list',\n    };\n    var panel = null;\n    var initnotes = null;\n    var strdeletenote = M.util.get_string('deletemynotes', 'block_mynotes');\n    \n    var getMynotesValidatedUrl = function(baseurl) {\n        var a = document.createElement('a');\n        a.href = baseurl;\n        return (a.search.length > 0) ? baseurl : baseurl + '?';\n    };\n    \n    var mynotes = { /** @alias module:blocks/mynotes */\n        \n        getMynotesValidatedUrl: function(baseurl) {\n            var a = document.createElement('a');\n            a.href = baseurl;\n            return (a.search.length > 0) ? baseurl : baseurl + '?';\n        },\n        /*\n         * Validation for textarea input text\n         */\n        getWarnings: function(status) {\n            if (status == false) {                \n                $('#addmynote-label-' + CONFIG.instanceid + '  span.warning').html(CONFIG.maxallowedcharacters_warning);\n            } else {\n                var ta = $('#id_mynotecontent-' + CONFIG.instanceid);\n                if (ta.val() == '') {\n                    $('#addmynote-label-' + CONFIG.instanceid + '  span.warning').html('');\n                } else {\n                    var cl = CONFIG.maxallowedcharacters - ta.val().length;\n                    $('#addmynote-label-' + CONFIG.instanceid + '  span.warning').html(M.util.get_string('charactersleft', 'block_mynotes') + cl);\n                }\n            }\n        },\n        checkInputText: function() {\n            var ta = $('#id_mynotecontent-' + CONFIG.instanceid);\n            if (ta.val().length <= CONFIG.maxallowedcharacters) {\n                $('#addmynote_submit').removeAttr('disabled', '');\n                return true;\n            } else {\n                $('#addmynote_submit').attr('disabled', 'disabled');\n                return false;\n            }\n            return true;\n        },\n        toggle_textarea: function(e) {\n            var ta = $('#id_mynotecontent-' + CONFIG.instanceid);\n            \n            if (!ta) {\n                return false;\n            }\n            var focus = (e.type == 'focusin');\n            if (focus) {\n                if (ta.val() == M.util.get_string('placeholdercontent', 'block_mynotes')) {\n                    ta.val('');\n                    $('.textarea').css('border-color', 'black');\n                }\n            } else{\n                if (ta.val() == '') {\n                    ta.val(M.util.get_string('placeholdercontent', 'block_mynotes'));\n                    $('.textarea').css('border-color', 'gray');\n                    $('#addmynote-label-' + CONFIG.instanceid + '  span.warning').html('');\n                }\n            }\n        },\n        request: function(args) {\n            var params = {};  \n            var scope = this;\n            if (args['scope']) {\n                scope = args['scope'];\n            }\n            params['contextarea'] = scope.currenttab.replace(CONFIG.prefix, '');\n            params['contextarea'] = params['contextarea'].replace('#', '');\n            if (args.params) {\n                for (i in args.params) {\n                    params[i] = args.params[i];\n                }\n            }\n            params['sesskey']   = M.cfg.sesskey;\n            \n            var cfg = {\n                method: 'POST',\n                on: {\n                    start: function() {\n                        //'<div class=\"mdl-align\"><img src=\"'+M.util.image_url('i/loading', 'core')+'\" /></div>';\n                    },\n                    complete: function(id,o,p) {\n                        if (!o) {\n                            alert('IO FATAL');\n                            return false;\n                        }\n                        var data = Y.JSON.parse(o.responseText);\n                        if (data.error) {\n                            if (data.error == 'require_login') {\n                                args.callback(id,data,p);\n                                return true;\n                            }\n                            alert(data.error);\n                            return false;\n                        } else {\n                            args.callback(id,data,p);\n                            return true;\n                        }\n                    }\n                },\n                arguments: {\n                    scope: scope\n                },\n                headers: {\n                    'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'\n                },\n                data: build_querystring(params)\n            };\n            if (args.form) {\n                cfg.form = args.form;\n            }\n            Y.io(this.api, cfg);\n        },\n        saveMynotes: function(e) {\n            e.preventDefault();\n            var scope = this;\n            \n            if (scope.checkInputText() == false) {\n                return false;\n            }\n            var ta = $('#id_mynotecontent-' + CONFIG.instanceid);\n            if (ta.val() == \"\" || ta.val() == M.util.get_string('placeholdercontent', 'block_mynotes')) {\n                return false;\n            }\n            var arg = {\n                contextid: CONFIG.contextid,\n                content: ta.val(),\n                action: 'add',\n                contextarea: scope.currenttabindex,\n            };\n            ta.attr('disabled', true);\n            ta.css({\n                'backgroundImage': 'url(' + M.util.image_url('i/loading_small', 'core') + ')',\n                'backgroundRepeat': 'no-repeat',\n                'backgroundPosition': 'center center'\n            });\n            this.request({\n                    params: arg, \n                    callback: function(id, ret, args) {\n                        if (!ret.notes) {\n                            return false;\n                        }\n                        $('#addmynote-label-' + CONFIG.instanceid + '  span.warning').html('');\n                        $('#id_mynotecontent-' + CONFIG.instanceid).val(M.util.get_string('placeholdercontent', 'block_mynotes')); \n                        $('#id_mynotecontent-' + CONFIG.instanceid).removeAttr('disabled');\n                        $('#id_mynotecontent-' + CONFIG.instanceid).css({backgroundImage: ''});\n                        if (scope.currenttab != scope.defaulttab) {\n                            scope.currenttab = scope.defaulttab;\n                            var tab = scope.currenttab.replace('#', '#tab-');\n                            $(SELECTORS.MYNOTES_BASE + ' ul.tabs-menu li').removeClass(\"current\");\n                            $(SELECTORS.MYNOTES_BASE + ' ' + tab).addClass('current');\n                            $(SELECTORS.MYNOTES_BASE + ' .tab-content').has(scope.currenttab).addClass('current');        \n                            $(SELECTORS.MYNOTES_BASE + ' .tab-content').not(scope.currenttab).css(\"display\", \"none\");\n                            $(SELECTORS.MYNOTES_BASE + ' ' + scope.currenttab + '.tab-content').css(\"display\", \"block\");\n                        }\n                        scope.addToList(ret, 'add');\n                        scope.displayMynotes();\n                        $(SELECTORS.MYNOTES_BASE).find('.responsetext').html(M.util.get_string('savedsuccess', 'block_mynotes'));                        \n                    }\n                }\n            );\n        },\n        addToList: function(notesobj, action='') {\n            var scope = this;\n            var el = $(SELECTORS.MYNOTES_BASE).find(scope.currenttab + '-list');\n            if (action == 'add') {\n                el.prepend(scope.renderMynotes(notesobj.notes));\n            } else {\n                el.append(scope.renderMynotes(notesobj.notes));\n                $(el).find('li').sort(sort_li) // sort elements\n                  .appendTo(el); // append again to the list\n                // sort function callback\n                function sort_li(a, b){\n                    return ($(b).data('itemid')) > ($(a).data('itemid')) ? 1 : -1;    \n                }\n            }\n            $(SELECTORS.MYNOTES_BASE).find(scope.currenttab).attr('notes-count', notesobj.count);\n        },        \n        getMynotes: function(page=0) {\n            var scope = this;\n            page = parseInt(page);\n            var el = $(SELECTORS.MYNOTES_BASE).find(scope.currenttab + '-list');\n            var notescount = el.find('li').length;\n            var lastpage = Math.ceil(notescount / CONFIG.perpage);\n            if (notescount > 0 && lastpage > page) {\n                scope.displayMynotes();\n                return false;\n            }           \n            var arg = {           \n                contextid: CONFIG.contextid,\n                action: 'get',\n                page: page,\n            };            \n            this.request({\n                params: arg, \n                callback: function(id, ret, args) {\n                    scope.addToList(ret);                    \n                    scope.displayMynotes();\n                }\n            });\n        }, \n        updateMynotesInfo: function(mynotescount, page) {\n            page = parseInt(page);\n            mynotescount = parseInt(mynotescount);\n            var scope = this; \n            var paging = '';\n            if (mynotescount > CONFIG.perpage) {\n                var pagenum = page - 1;\n                var prevlink = '';\n                var nextlink = '';\n                \n                if (page > 0) {\n                    prevlink = scope.createLink(pagenum, M.util.get_string('previouspage', 'block_mynotes'), 'previous');\n                }\n                if (CONFIG.perpage > 0) {\n                    var lastpage = Math.ceil(mynotescount / CONFIG.perpage);\n                } else {\n                    var lastpage = 1;\n                }\n                // Uncomment this line if you want to display page number \n                //paging += '<span class=\"current-page\">' + (page + 1) + '</span>';\n                pagenum = page + 1;\n                if (pagenum != lastpage) {\n                    nextlink = scope.createLink(pagenum, M.util.get_string('nextpage', 'block_mynotes'), 'next');\n                }\n                paging = prevlink;\n                if (prevlink != '' && nextlink != '') {\n                    paging += '<span class=\"separator\"></span>';\n                }\n                paging += nextlink;\n                \n                paging = '<span class=\"paging\">' + paging + '</span>';\n            }\n            var noteinfo = $(SELECTORS.MYNOTES_BASE).find(scope.currenttab);\n            if (mynotescount > 0) {\n                noteinfo.find('.count').html(M.util.get_string('mynotescount', 'block_mynotes') + '' + mynotescount);\n            } else {\n                noteinfo.find('.count').html(M.util.get_string('nothingtodisplay', 'block_mynotes'));\n            }\n            noteinfo.find('.mynotes-paging').html(paging);\n        },\n        /*\n         * Render notes as html ul li element\n         */\n        renderMynotes: function(notes) {\n            if (notes.length < 1) {\n                return false;\n            }\n            var lists = '';\n            var x = '';\n            for (x in notes) {\n                $('#mynote-'+ CONFIG.instanceid + '-' + notes[x].id).remove();\n                var deletelink = '<a href=\"#\" id=\"mynote-delete-' + CONFIG.instanceid + '-' + notes[x].id + '\" class=\"mynote-delete\" title=\"'+ strdeletenote +'\">'+ NODES.DELETE_ICON +'</a>';\n                var notedetail = '';\n                if (notes[x].coursename != '') {\n                    notedetail = '<div class=\"note-detail\">' + notes[x].coursename + ' - ' + '</div>';\n                }\n                var userdate = '<div class=\"time\">' + notes[x].timecreated + '</div>';\n                var note_html = '<div class=\"content\">' + deletelink + notes[x].content + '</div>';\n                lists += '<li id=\"mynote-' + CONFIG.instanceid + '-' + notes[x].id + '\" data-itemid=\"' + notes[x].id + '\">' + note_html + notedetail + userdate + '</li>';\n            }\n            return lists;\n        },\n        createLink: function(page, text, classname) {\n            var classattribute = (typeof(classname) != 'undefined') ? ' class=\"'+classname+'\"' : '';\n            return '<a href=\"' + this.api + '&page=' + page + '\"' + classattribute + '>' + text + '</a>';\n        },\n        displayMynotes: function() {\n            var scope = this;            \n            var page = parseInt($(SELECTORS.MYNOTES_BASE).find(scope.currenttab).attr('onpage'));\n            var mynotescount = parseInt($(SELECTORS.MYNOTES_BASE).find(scope.currenttab).attr('notes-count'));\n            var el = $(SELECTORS.MYNOTES_BASE).find(' ' + scope.currenttab + '-list');            \n            var notescount = el.find('li').length;\n            var lastpage = Math.ceil(notescount / CONFIG.perpage);\n            \n            if (notescount > 0 && lastpage <= page) {\n                page = lastpage - 1;\n            }\n            var upperlimit = page * CONFIG.perpage + CONFIG.perpage;            \n            var lowerlimit = page * CONFIG.perpage;\n            el.find('li').css('display', 'none');\n            el.find('li').each(function(i, el) {\n                if (i>=lowerlimit && i<upperlimit) {\n                    $(el).css('display', 'block');\n                }\n            });            \n            scope.updateMynotesInfo(mynotescount, page);\n            //panel.centerDialogue();\n        },\n        registerActions: function() {\n            var scope = this; \n            \n            $('body').delegate('#addmynote_cancel', 'click', function() {panel.hide()});\n            $('body').delegate('#addmynote_submit', 'click', function(e) {scope.saveMynotes(e)});\n            \n            $('body').delegate(SELECTORS.MYNOTES_BASE + ' ul.tabs-menu li', 'click', function(e) {\n                $(this).addClass(\"current\");\n                $(this).siblings().removeClass(\"current\");\n                var tab = $(this).attr(\"id\").replace('tab-', '');\n                $(SELECTORS.MYNOTES_BASE + ' .tab-content').not('#' + tab).css(\"display\", \"none\");\n                $(SELECTORS.MYNOTES_BASE + ' #' + tab + '.tab-content').css(\"display\", \"block\");\n                scope.currenttab = '#'+tab;\n\n                var isloaded = $(scope.currenttab).attr('data-loaded');\n                if (typeof isloaded == 'undefined' || isloaded == false) {\n                    $(SELECTORS.MYNOTES_BASE).find(scope.currenttab).attr('data-loaded', \"true\");\n                    scope.getMynotes(0);\n                }                    \n            });\n            \n            $('body').delegate('#id_mynotecontent-' + CONFIG.instanceid, 'focus blur', function(e) {\n                scope.toggle_textarea(e);\n            });\n            $('body').delegate('#id_mynotecontent-' + CONFIG.instanceid, 'change keypress keyup', function(e) {\n                scope.getWarnings(scope.checkInputText());         \n            });\n            \n            $('body').delegate(SELECTORS.MYNOTES_BASE + ' .mynotes-paging .paging a', 'click', function(e) {\n                e.preventDefault();\n                var regex = new RegExp(/[\\?&]page=(\\d+)/);\n                var results = regex.exec($(this).attr('href'));\n                var page = 0;\n                if (results[1]) {\n                    page = results[1];\n                }\n                $(SELECTORS.MYNOTES_BASE).find(scope.currenttab).attr('onpage', parseInt(page));\n                scope.getMynotes(page);\n            });\n            $('body').delegate(SELECTORS.MYNOTES_BASE + ' a.mynote-delete', 'click', function(e) {\n                e.preventDefault();                \n                var nid = $(this).attr('id');\n                if (nid != '' || nid != 'undefined') {\n                    var notescount = $(SELECTORS.MYNOTES_BASE).find(SELECTORS.MYNOTES_LISTS + '-' + scope.currenttab + ' > li').length;\n                    var id = nid.replace('mynote-delete-'+ CONFIG.instanceid + '-', '');                    \n                    var arg = {\n                        contextid: CONFIG.contextid,\n                        action: 'delete',\n                        noteid: id,\n                        lastnotecounts: notescount,\n                    };\n                    scope.request({\n                        params: arg, \n                        callback: function(id, ret, args) { \n                            args.scope.addToList(ret);\n                            $('#mynote-'+ CONFIG.instanceid + '-' + ret.noteid).remove();                            \n                            args.scope.displayMynotes();\n                        }\n                    });\n                }                \n            });\n        },\n        displayDialogue: function(e) {\n            var scope = mynotes;\n            if (panel === null) {\n                str.get_strings([\n                    {key : 'mynotes', component : 'block_mynotes'},\n                    {key : 'characterlimit', component : 'block_mynotes'},\n                    {key : 'save', component : 'block_mynotes'},                \n                    {key : 'cancel'},\n                    {key : 'mynotessavedundertab', component : 'block_mynotes', param: CONFIG.contextareas[scope.currenttabindex]},\n                    {key : 'placeholdercontent', component : 'block_mynotes'}\n                ]).done(function(s) {\n                    // Create basic tab structure\n                    var el = $('<div></div>').append($('<div id=\"' + CSS.MYNOTES_BASE + '\" class=\"' + CSS.MYNOTES_BASE + '\"></div>')\n                        .append('<div class=\"inputarea\"><div class=\"responsetext\"></div><div id=\"addmynote-label-' + CONFIG.instanceid + '\">' + s[1] + ' ' + CONFIG.maxallowedcharacters + '<span class=\"warning\"></span></div>' +\n                            '<div class=\"textarea\"><textarea id=\"id_mynotecontent-' + CONFIG.instanceid + '\" name=\"mynotecontent\" rows=\"2\">' + s[5] + '</textarea></div>' +\n                            '<p class=\"notesavedhint\">' + s[4] + '</p>' +\n                            '<p class=\"mdl-align\"><input type=\"submit\" id=\"addmynote_submit\"/></p>' +\n                            '</div>'\n                            )\n                            .append($('<ul class=\"tabs-menu\"></ul>'))\n                            .append($('<div class=\"tab\"></div>'))\n                        );\n                    el.find('#addmynote_submit').attr('value', s[2]);\n                    el.find('#addmynote_cancel').attr('value', s[3]); \n                    var tabsmenu = '';\n                    var tabcontents = '';\n                    var i = '';\n                    for (i in CONFIG.contextareas) {\n                        if (scope.currenttabindex == i) {\n                            tabsmenu += '<li class=\"current\" id=\"tab-' + CONFIG.prefix + i + '\"><div class=\"menu-item\">' + CONFIG.contextareas[i] + '</div></li>';\n                        } else {\n                            tabsmenu += '<li class=\"\" id=\"tab-' + CONFIG.prefix + i + '\"><div class=\"menu-item\">' + CONFIG.contextareas[i] + '</div></li>';\n                        }\n                        tabcontents += '<div class=\"tab-content\" id=\"' + CONFIG.prefix + i + '\" onpage=\"0\" notes-count=\"0\">'\n                            + '<div class=\"notes-info\"><div class=\"mynotes-paging\"></div><div class=\"count\"></div></div>'\n                            + '<ul id=\"' + CONFIG.prefix + i + '-list\" class=\"mynotes_lists\"></ul>'\n                            + '</div>';\n                    }\n                    el.find('.tabs-menu').append(tabsmenu);\n                    el.find('.tab').append($(tabcontents));\n                    Y.use('moodle-core-notification-dialogue', function() {\n                        panel = new M.core.dialogue({\n                            draggable: true,\n                            modal: true,\n                            closeButton: true,\n                            headerContent: M.util.get_string('mynotes', 'block_mynotes'),\n                            responsive: true,\n                        });\n                        panel.set('bodyContent', el.html());\n                        if (initnotes === null) {\n                            initnotes = true;                        \n                            // Get initial notes\n                            scope.getMynotes(0);\n                            $(SELECTORS.MYNOTES_BASE).find(scope.currenttab).attr('data-loaded', \"true\");\n                            $(SELECTORS.MYNOTES_BASE).find(scope.currenttab).css('display', 'block');\n                        }\n                        panel.show();\n                    });\n                    scope.registerActions();\n                    \n                });\n            } else {\n                panel.show();\n            }            \n        },\n        /**\n         * Initialize mynotes\n         * @access public\n         * @param {int} instanceid\n         * @param {int} contextid\n         * @param {int} maxallowedcharacters\n         * @param {int} perpage   \n         * @param {string} editingicon_pos        \n         * @param {bool} editing\n         * @param {string} adminurl\n         * @param {array} contextareas\n         * @param {string} currenttabindex      \n         */\n        init: function(args) {\n            CONFIG = args;    \n            CONFIG.prefix = 'mynotes_';\n            this.perpage = parseInt(CONFIG.perpage);    \n            this.currenttab = '#mynotes_' + args.currenttabindex;\n            this.defaulttab = '#mynotes_' + args.currenttabindex;    \n            this.currenttabindex = args.currenttabindex;\n            this.api = this.getMynotesValidatedUrl(M.cfg.wwwroot+'/blocks/mynotes/mynotes_ajax.php');\n            \n            var strtitle =  M.util.get_string('showmynotes', 'block_mynotes');\n            if (!CONFIG.editing) {\n                var handler = $('<div class=\"'+ CSS.MYNOTES_OPENER +'\" title=\"' + strtitle + '\" alt=\"' + strtitle+ '\">' + M.util.get_string('mynotes', 'block_mynotes') + '</div>');\n                handler.addClass(CONFIG.editingicon_pos);\n                $('body').append(handler);\n                handler.html('<span class=\"pencil\">&#x270D;</span>');\n            } else {\n                var handler = $('<div class=\"'+ CSS.MYNOTES_OPENER +'\" title=\"' + strtitle + '\" alt=\"' + strtitle+ '\">' + M.util.get_string('mynotes', 'block_mynotes') + '</div>');\n                handler.addClass(CONFIG.editingicon_pos);\n                handler.html('<span class=\"pencil\">&#x270D;</span>');                \n                $('.inline-'+ CSS.MYNOTES_OPENER).html(handler);\n                $('.inline-'+ CSS.MYNOTES_OPENER).append('<div class=\"mynotes-pos-inline-text '+ CSS.MYNOTES_OPENER +'\">' + strtitle + '</div>');\n            }\n            var body = $('body');\n            body.delegate(SELECTORS.MYNOTES_OPENER, 'click', this.displayDialogue);\n        }\n    };\n    return mynotes;\n});"],"file":"mynotesblock.min.js"}